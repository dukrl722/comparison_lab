# Comparison Lab

A PHP project designed to compare LLM-generated solutions with human implementations for various data structure problems. This lab evaluates the quality, correctness, and performance of code generated by different AI assistants.

## Overview

This project implements and tests four common data structure problems, comparing solutions created by:
- **Human developers** (baseline implementations)
- **LLM assistants**: ChatGPT, Claude, Copilot, Cursor, and Gemini

## Features

The project includes implementations for the following data structure problems:

### 1. Array Flat (`ArrayFlat`)
Converts a flat array with parent-child relationships into a hierarchical tree structure.

**Test Cases:**
- Groups flat array into hierarchical structure
- Returns empty array when data is empty
- Throws exception when dataset is incorrect (missing or duplicate IDs)

### 2. Array Pagination (`ArrayPagination`)
Implements pagination functionality for arrays with configurable page size and page number.

**Test Cases:**
- Paginates array correctly with specified page and perPage
- Handles default parameters (page=1, perPage=10)
- Converts negative numbers to absolute values
- Returns proper pagination metadata (current_page, per_page, total_items, total_pages, has_next_page)

### 3. Array Sorting (`ArraySorting`)
Sorts arrays by specified columns in ascending or descending order.

**Test Cases:**
- Sorts by name in ascending order
- Sorts by name in descending order
- Sorts by ID in ascending order (default)
- Sorts by ID in descending order
- Falls back to ID sorting when column doesn't exist

### 4. Sensitive Data Mask (`SensitiveDataMask`)
Masks sensitive email addresses while preserving readability.

**Test Cases:**
- Masks email addresses correctly (e.g., `test@email.com` → `t**t@email.com`)
- Handles short email addresses (e.g., `a@email.com` → `*a***@email.com`)
- Throws exception for invalid email formats

## Project Structure

```
comparison_lab/
├── src/
│   ├── Human/              # Human baseline implementations
│   │   ├── ArrayFlat.php
│   │   ├── ArrayPagination.php
│   │   ├── ArraySorting.php
│   │   └── SensitiveDataMask.php
│   ├── ChatGPT/            # ChatGPT implementations
│   ├── Claude/              # Claude implementations
│   ├── Copilot/             # GitHub Copilot implementations
│   ├── Cursor/              # Cursor AI implementations
│   └── Gemini/              # Google Gemini implementations
├── tests/
│   ├── Feature/             # Feature tests for all implementations
│   │   ├── ArrayFlatTest.php
│   │   ├── ArrayPaginationTest.php
│   │   ├── ArraySortingTest.php
│   │   └── SensitiveDataMaskTest.php
│   └── Datasets/            # Test datasets
│       ├── ArrayFlatTest.json
│       ├── ArrayPaginationTest.json
│       └── ArraySortingTest.json
├── data/                    # Sample data files
│   ├── ArrayFlatData.json
│   ├── ArrayPaginationData.json
│   └── ArraySortingData.json
├── index.php                # Benchmark script
└── composer.json
```

## Requirements

- PHP 8.1 or higher
- Composer
- JSON extension

## Installation

1. Clone the repository:
```bash
git clone <repository-url>
cd comparison_lab
```

2. Install dependencies:
```bash
composer install
```

## Usage

### Running Tests

Run all tests:
```bash
./vendor/bin/pest
```

Run specific test file:
```bash
./vendor/bin/pest tests/Feature/ArrayFlatTest.php
```

### Code Formatting

Format code using Laravel Pint:
```bash
./vendor/bin/pint
```

### Benchmarking

Run performance benchmarks:
```bash
php index.php
```

The benchmark script measures:
- Average execution time (milliseconds)
- Memory peak usage (KB)

## Test Results

All implementations are tested against the same test suite to ensure:
- **Correctness**: All implementations pass the same tests
- **Consistency**: Same interface and behavior across all implementations
- **Quality**: Code follows PSR-12 standards

## Contributing

When adding new implementations:

1. Create your implementation in the appropriate directory (`src/YourLLM/`)
2. Follow the same class structure and method signatures as the Human implementation
3. Ensure all tests pass: `./vendor/bin/pest`
4. Format code: `./vendor/bin/pint`
5. Update this README if adding new features or test cases

## Implementation Guidelines

Each implementation should:
- Use the same class name (or follow the naming convention)
- Implement the same public methods
- Handle edge cases identically
- Pass all existing tests
- Follow PSR-12 coding standards
